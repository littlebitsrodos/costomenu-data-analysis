<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Acquisition Cost Analysis - CostoMenu</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .metric-label {
            color: #666;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }

        .metric-change {
            font-size: 0.9em;
            margin-top: 10px;
        }

        .positive {
            color: #10b981;
        }

        .negative {
            color: #ef4444;
        }

        .chart-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .chart-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .insights-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .insight-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .insight-card.high-priority {
            border-left-color: #ef4444;
        }

        .insight-card.medium-priority {
            border-left-color: #f59e0b;
        }

        .insight-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .insight-details {
            color: #666;
            line-height: 1.6;
        }

        .priority-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .priority-high {
            background: #fee2e2;
            color: #991b1b;
        }

        .priority-medium {
            background: #fef3c7;
            color: #92400e;
        }

        canvas {
            max-height: 400px;
        }

        .segment-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .segment-table th,
        .segment-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .segment-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .segment-table tr:hover {
            background: #f8f9fa;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üìä Customer Acquisition Cost Analysis</h1>
            <p class="subtitle">CostoMenu - Comprehensive CAC & LTV Insights</p>
        </div>

        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-label">Total Users</div>
                <div class="metric-value">5,441</div>
                <div class="metric-change">All-time registered users</div>
            </div>

            <div class="metric-card">
                <div class="metric-label">Total Revenue</div>
                <div class="metric-value">‚Ç¨124K</div>
                <div class="metric-change">Lifetime value generated</div>
            </div>

            <div class="metric-card">
                <div class="metric-label">Conversion Rate</div>
                <div class="metric-value">11.8%</div>
                <div class="metric-change negative">‚ö†Ô∏è Below industry average</div>
            </div>

            <div class="metric-card">
                <div class="metric-label">Avg CAC (3yr)</div>
                <div class="metric-value">‚Ç¨236</div>
                <div class="metric-change negative">üìà Increasing trend</div>
            </div>
        </div>

        <div class="chart-container">
            <h2 class="chart-title">CAC & LTV Trends by Year</h2>
            <canvas id="cacLtvChart"></canvas>
        </div>

        <div class="chart-container">
            <h2 class="chart-title">LTV:CAC Ratio Over Time</h2>
            <canvas id="ltvCacRatioChart"></canvas>
        </div>

        <div class="chart-container">
            <h2 class="chart-title">User Acquisition by Year</h2>
            <canvas id="userAcquisitionChart"></canvas>
        </div>

        <div class="chart-container">
            <h2 class="chart-title">Annual Revenue Growth (Verified)</h2>
            <canvas id="revenueChart"></canvas>
        </div>

        <div class="insights-section">
            <h2 class="chart-title">üéØ Key Insights & Recommendations</h2>

            <div class="insight-card high-priority">
                <span class="priority-badge priority-high">High Priority</span>
                <div class="insight-title">Improve LTV:CAC Ratio</div>
                <div class="insight-details">
                    Current ratio is 0.58:1, well below the healthy benchmark of 3:1. This means you're spending more to
                    acquire customers than they're worth.
                    <br><br>
                    <strong>Actions:</strong>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li>Increase pricing for Professional tier (currently ‚Ç¨140.79 avg LTV)</li>
                        <li>Reduce marketing spend on low-converting channels</li>
                        <li>Focus on organic growth and referral programs</li>
                    </ul>
                </div>
            </div>

            <div class="insight-card high-priority">
                <span class="priority-badge priority-high">High Priority</span>
                <div class="insight-title">Boost Conversion Rate</div>
                <div class="insight-details">
                    Only 11.82% of users are paying customers. Industry average for SaaS is 25-40%.
                    <br><br>
                    <strong>Actions:</strong>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li>Improve onboarding experience to demonstrate value faster</li>
                        <li>Implement free trial with credit card requirement</li>
                        <li>Add in-app prompts showing premium features</li>
                        <li>Create urgency with limited-time offers</li>
                    </ul>
                </div>
            </div>

            <div class="insight-card medium-priority">
                <span class="priority-badge priority-medium">Medium Priority</span>
                <div class="insight-title">Focus on Professional Tier</div>
                <div class="insight-details">
                    Professional users generate ‚Ç¨140.79 average revenue vs ‚Ç¨64.62 for Expert tier - 2.2x higher value.
                    <br><br>
                    <strong>Actions:</strong>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li>Target marketing campaigns at professional chefs and restaurants</li>
                        <li>Create case studies from successful Professional users</li>
                        <li>Offer Professional tier upgrade incentives</li>
                    </ul>
                </div>
            </div>

            <div class="insight-card medium-priority">
                <span class="priority-badge priority-medium">Medium Priority</span>
                <div class="insight-title">CAC Increasing Year-Over-Year</div>
                <div class="insight-details">
                    CAC has increased from ‚Ç¨40 (2022) to ‚Ç¨539 (2026 YTD). This is unsustainable.
                    <br><br>
                    <strong>Possible Causes:</strong>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li>Market saturation in current channels</li>
                        <li>Increased competition driving up ad costs</li>
                        <li>Less efficient targeting</li>
                        <li>Lower quality traffic sources</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <h2 class="chart-title">üìà User Segment Analysis</h2>
            <table class="segment-table">
                <thead>
                    <tr>
                        <th>Segment</th>
                        <th>Total Users</th>
                        <th>Total Revenue</th>
                        <th>Avg Revenue/User</th>
                        <th>Avg Recipes</th>
                        <th>% of Total</th>
                    </tr>
                </thead>
                <tbody id="segmentTableBody">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Load data from JSON file
        fetch('customer_acquisition_cost_analysis.json')
            .then(response => response.json())
            .then(data => {
                renderCharts(data);
                renderSegmentTable(data.segment_analysis);
            });

        function renderCharts(data) {
            // CAC & LTV Chart
            const cacLtvCtx = document.getElementById('cacLtvChart').getContext('2d');
            const years = data.cac_by_year.map(d => d.year);
            const cacValues = data.cac_by_year.map(d => d.cac);
            const ltvValues = data.cac_by_year.map(d => d.avg_ltv);

            new Chart(cacLtvCtx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [
                        {
                            label: 'Customer Acquisition Cost (‚Ç¨)',
                            data: cacValues,
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Average LTV (‚Ç¨)',
                            data: ltvValues,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Amount (‚Ç¨)'
                            }
                        }
                    }
                }
            });

            // LTV:CAC Ratio Chart
            const ratioCtx = document.getElementById('ltvCacRatioChart').getContext('2d');
            const ratioValues = data.cac_by_year.map(d => d.ltv_cac_ratio);

            new Chart(ratioCtx, {
                type: 'bar',
                data: {
                    labels: years,
                    datasets: [{
                        label: 'LTV:CAC Ratio',
                        data: ratioValues,
                        backgroundColor: ratioValues.map(v => v >= 3 ? '#10b981' : v >= 1 ? '#f59e0b' : '#ef4444'),
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        annotation: {
                            annotations: {
                                line1: {
                                    type: 'line',
                                    yMin: 3,
                                    yMax: 3,
                                    borderColor: '#10b981',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: {
                                        content: 'Target: 3:1',
                                        enabled: true,
                                        position: 'end'
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Ratio'
                            }
                        }
                    }
                }
            });

            // User Acquisition Chart
            const userCtx = document.getElementById('userAcquisitionChart').getContext('2d');
            const userCounts = data.cac_by_year.map(d => d.total_users);

            new Chart(userCtx, {
                type: 'bar',
                data: {
                    labels: years,
                    datasets: [{
                        label: 'Users Acquired',
                        data: userCounts,
                        backgroundColor: '#667eea',
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Users'
                            }
                        }
                    }
                }
            });

            // Annual Revenue Chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const revYears = [2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025, 2026];
            const revValues = [477.40, 7447.80, 7303.00, 8353.18, 5125.50, 8195.50, 12505.59, 18738.40, 20637.00, 22563.41, 2263.00];

            new Chart(revenueCtx, {
                type: 'bar',
                data: {
                    labels: revYears,
                    datasets: [{
                        label: 'Total Revenue (‚Ç¨)',
                        data: revValues,
                        backgroundColor: '#8b5cf6', // Violet color
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += new Intl.NumberFormat('en-IE', { style: 'currency', currency: 'EUR' }).format(context.parsed.y);
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Revenue (‚Ç¨)'
                            }
                        }
                    }
                }
            });
        }

        function renderSegmentTable(segments) {
            const tbody = document.getElementById('segmentTableBody');
            segments.forEach(segment => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td><strong>${segment.segment.replace('_', ' ')}</strong></td>
                    <td>${segment.total_users.toLocaleString()}</td>
                    <td>‚Ç¨${segment.total_revenue.toLocaleString()}</td>
                    <td>‚Ç¨${segment.avg_revenue_per_user.toFixed(2)}</td>
                    <td>${segment.avg_recipes.toFixed(1)}</td>
                    <td>${segment.pct_of_total_users.toFixed(1)}%</td>
                `;
            });
        }
    </script>
</body>

</html>